<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>RhemaLifestyle Mobile</title>
		<link rel="stylesheet" href="themes/Rhemelifesyletheme.min.css" />
		
		<link rel="stylesheet" href="themes/jquery.mobile.custom.structure.min.css" />
                <link rel="stylesheet" href="themes/jquery.mobile.datepicker.css"/>
                <style type="text/css">
                    
   #display {

    padding-left:10px;
    padding-right:10px;
    margin-left:10px;
    margin-right:10px;
    width:500px;
    height:300px;
    border:1px solid black;
}
                    
                </style>
                
                  <script src="http://localhost:54886/Scripts/modernizr-2.5.3.js"></script>

           </head>
           
           
    <body>
        <div data-role="page" data-theme="a"  id="stepone">
		
			<div data-role="header" data-position="inline">
				<h1>Step One</h1>
			</div>
			
			<div data-role="content" data-theme="a">
				
				<!-- <div class="splash"></div> -->
                                
                                
					
					<a href="#chat" data-role="button">Open mobilechat</a>
			</div>
			
                    <div data-role="footer"><span class="power">Powered by Jiz Technologies</span></div>
		</div>
        
        
        <div data-role="page" data-theme="a"  id="chat">
		
			<div data-role="header" data-position="inline">
				<h1>Mobile Chat room</h1>
			</div>
			
			<div data-role="content" data-theme="a">
				
				   <div id="display">
                                
                                       
                                   </div>
                            
                            <input type="text" name="Chatname" id="Chatname"/>
                            <input type="text" name="message" id="Message"/>
			
					<a data-role="button" id="send">Send</a>
			</div>
			
                    <div data-role="footer"><span class="power">Powered by Jiz Technologies</span></div>
		</div>
        
        
        <script src="http://localhost:54886/Scripts/jquery-1.7.1.js"></script>
    
    <script src="http://localhost:54886/Scripts/jquery.signalR-2.0.1.min.js"></script>
     <script src="http://localhost:54886/signalr/hubs"></script>
    <script type="text/javascript">
        
        
$(document).ready(function (){

$.connection.hub.url = 'http://localhost:54886/signalr/hubs';
var hub = $.connection.RhemaHub;


clientMethods(hub);

$.connection.hub.start().done(function () {

    serverMethods(hub);
});


function clientMethods(hub) {

    hub.client.ShowMessage = function (messageObj) {

        var name = messageObj.Chatname;
        var message = messageObj.Message;
        $('#display').append(name +" : "+message+"<br/>");
    };


}


function serverMethods(hub) {

    $('#send').click(function () {

    ///    alert('clicked here');

        var message = $('#Message').val();

        var chatname = $('#Chatname').val();

        hub.server.sendMessage(chatname, message);

        $('#Message').val('');
        $('Chatname').val('');
    });
    
}

    
});
    </script>
        
    </body>
</html>